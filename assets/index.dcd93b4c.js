var m=Object.defineProperty;var P=(a,s,t)=>s in a?m(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var n=(a,s,t)=>(P(a,typeof s!="symbol"?s+"":s,t),t);import{f as u,d as F,c as f,a as l,e as h,F as x,r as C,o as g,t as w,p as D,b as k,u as R}from"./index.d72dfb10.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";class I{constructor(s){n(this,"currentPage");n(this,"totalPage");n(this,"pageSize");n(this,"params");n(this,"datas");n(this,"requestFn");n(this,"responseCompletion");n(this,"refreshing");n(this,"loading");n(this,"finished");var t;this.requestFn=s.requestFn,this.params=s.params||{},this.datas=s.datas,this.responseCompletion=s.responseCompletion,this.pageSize=(t=s.pageSize)!=null?t:20,this.currentPage=u(1),this.totalPage=u(1),this.refreshing=u(!1),this.loading=u(!1),this.finished=u(!1)}loadData(){const s={currentPage:this.currentPage.value,pageSize:this.pageSize,...this.params};this.currentPage.value===1&&(this.datas.value=[]),this.requestFn(s).then(t=>{if(!t)return;this.totalPage.value=t.totalPage;let o=t.responseObject.items;this.responseCompletion&&(o=this.responseCompletion(this,t.datas)),this.currentPage.value===1?this.datas.value=o:this.datas.value=this.datas.value.concat(o),this.didLoaded()})}didLoaded(){this.currentPage.value===1?(this.refreshing.value=!1,this.finished.value=!1):this.loading.value=!1}headerRefreshing(){this.currentPage.value=1,this.loadData()}footerRefreshing(){if(this.currentPage.value===this.totalPage.value){this.finished.value=!0,this.didLoaded();return}this.currentPage.value+=1,this.loadData()}}const q=a=>(D("data-v-136c7378"),a=a(),k(),a),S={class:"page_container"},y={class:"nav_bar"},B=q(()=>l("span",{class:"nav_title"},"PagingIndex",-1)),A={class:"flex_1 ofa w_100"},E={class:"float_wrap flex_column"},L=F({__name:"index",setup(a){const s=R();class t{constructor(e){this.name=e,this.name=e}}const o=Array.from({length:50},(i,e)=>new t(`name\uFF1A${e+1}`)),_=function(i,e){if(Math.ceil(o.length/e)<i)throw new Error("\u5F53\u524D\u9875\u8FC7\u957F");const r=(i-1)*e,c=i*e<o.length?i*e:o.length;return{responseObject:{items:o.slice(r,c)},totalPage:Math.ceil(o.length/e),currentPage:i,pageSize:e}},v=i=>new Promise(e=>{const r=_(i.currentPage,i.pageSize);e(r)}),p=u([]),d=new I({requestFn:v,datas:p,pageSize:5});return d.headerRefreshing(),(i,e)=>(g(),f("div",S,[l("div",y,[l("span",{class:"back_btn",onClick:e[0]||(e[0]=r=>h(s).back())}," < "),B]),l("div",A,[(g(!0),f(x,null,C(p.value,(r,c)=>(g(),f("div",{key:c,class:"list_item"},w(r.name),1))),128))]),l("div",E,[l("div",{onClick:e[1]||(e[1]=(...r)=>h(d).headerRefreshing&&h(d).headerRefreshing(...r))},"\u4E0B\u62C9\u5237\u65B0"),l("div",{onClick:e[2]||(e[2]=(...r)=>h(d).footerRefreshing&&h(d).footerRefreshing(...r))},"\u4E0A\u62C9\u52A0\u8F7D")])]))}});var V=b(L,[["__scopeId","data-v-136c7378"]]);export{V as default};
